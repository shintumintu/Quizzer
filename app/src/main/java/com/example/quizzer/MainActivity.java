package com.example.quizzer;import androidx.annotation.RequiresApi;import androidx.appcompat.app.AppCompatActivity;import android.content.Intent;import android.os.Build;import android.os.Bundle;import android.view.View;import android.widget.Button;import android.widget.TextView;import android.widget.Toast;import com.android.volley.RequestQueue;import org.json.JSONArray;import org.json.JSONException;import org.json.JSONObject;import java.io.IOException;import java.io.InputStream;import java.util.ArrayList;import java.util.List;public class MainActivity extends AppCompatActivity {    private  final  String URL = "1http://www.json-generator.com/api/json/get/cwsNVJQGmq?indent=2";    TextView tq_question;    private Button b_answer1,b_answer2,b_answer3,b_answer4;    private RequestQueue mQueue;    List<Quiz> quiz ;    int currentQuestions =0;    int correct =0,wrong=0;    @RequiresApi(api = Build.VERSION_CODES.M)    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        tq_question = findViewById(R.id.question);        b_answer1 = findViewById(R.id.button1);        b_answer2 = findViewById(R.id.button2);        b_answer3 = findViewById(R.id.button3);        b_answer4 = findViewById(R.id.button4);        loadAllQuestions();        setQuestionScreen(currentQuestions);        b_answer1.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                if (quiz.get(currentQuestions).getTqOption1().equals(quiz.get(currentQuestions).getTqCorrectAnswer())) {                    correct++;                    Toast.makeText(MainActivity.this,"Correct",Toast.LENGTH_SHORT).show();                }else {                    wrong++;                    Toast.makeText(MainActivity.this,"Wrong! Correct answer:"+quiz.get(currentQuestions).getTqCorrectAnswer(),Toast.LENGTH_SHORT).show();                }                if (currentQuestions<quiz.size()-1){                    currentQuestions++;                    setQuestionScreen(currentQuestions);                }else {                    Intent intent = new Intent(getApplicationContext(),EndActivity.class);                    intent.putExtra("correct",correct);                    intent.putExtra("wrong",wrong);                    startActivity(intent);                    finish();                }            }        });        b_answer2.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                if (quiz.get(currentQuestions).getTqOption2().equals(quiz.get(currentQuestions).getTqCorrectAnswer())) {                    correct++;                    Toast.makeText(MainActivity.this,"Correct",Toast.LENGTH_SHORT).show();                }else {                    wrong++;                    Toast.makeText(MainActivity.this,"Wrong! Correct answer:"+quiz.get(currentQuestions).getTqCorrectAnswer(),Toast.LENGTH_SHORT).show();                }                if (currentQuestions<quiz.size()-1){                    currentQuestions++;                    setQuestionScreen(currentQuestions);                }else {                    Intent intent = new Intent(getApplicationContext(),EndActivity.class);                    intent.putExtra("correct",correct);                    intent.putExtra("wrong",wrong);                    startActivity(intent);                    finish();                }            }        });        b_answer3.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                if (quiz.get(currentQuestions).getTqOption3().equals(quiz.get(currentQuestions).getTqCorrectAnswer())) {                    correct++;                    Toast.makeText(MainActivity.this,"Correct",Toast.LENGTH_SHORT).show();                }else {                    wrong++;                    Toast.makeText(MainActivity.this,"Wrong! Correct answer:"+quiz.get(currentQuestions).getTqCorrectAnswer(),Toast.LENGTH_SHORT).show();                }                if (currentQuestions<quiz.size()-1){                    currentQuestions++;                    setQuestionScreen(currentQuestions);                }else {                    Intent intent = new Intent(getApplicationContext(),EndActivity.class);                    intent.putExtra("correct",correct);                    intent.putExtra("wrong",wrong);                    startActivity(intent);                    finish();                }            }        });        b_answer4.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                if (quiz.get(currentQuestions).getTqOption4().equals(quiz.get(currentQuestions).getTqCorrectAnswer())) {                    correct++;                    Toast.makeText(MainActivity.this,"Correct",Toast.LENGTH_SHORT).show();                }else {                    wrong++;                    Toast.makeText(MainActivity.this,"Wrong! Correct answer:"+quiz.get(currentQuestions).getTqCorrectAnswer(),Toast.LENGTH_SHORT).show();                }                if (currentQuestions<quiz.size()-1){                    currentQuestions++;                    setQuestionScreen(currentQuestions);                }else {                    Intent intent = new Intent(getApplicationContext(),EndActivity.class);                    intent.putExtra("correct",correct);                    intent.putExtra("wrong",wrong);                    startActivity(intent);                    finish();                }            }        });    }    private void setQuestionScreen(int number){        tq_question.setText(quiz.get(number).getTqCode()+" : "+quiz.get(number).getTqQuestion());        b_answer1.setText("(1) "+quiz.get(number).getTqOption1());        b_answer2.setText("(2) "+quiz.get(number).getTqOption2());        b_answer3.setText("(3) "+quiz.get(number).getTqOption3());        b_answer4.setText("(4) "+quiz.get(number).getTqOption4());    }    private void loadAllQuestions(){        quiz = new ArrayList<>();        String jsonStr= loadJsonFromAsset("data.json");        try {            JSONObject jsonObject = new JSONObject(jsonStr);            JSONArray jsonArray = jsonObject.getJSONArray("tqQuestions");            for (int i=0; i<jsonArray.length();i++){                JSONObject question = jsonArray.getJSONObject(i);                int questionNumber= question.getInt("tqCode");                String questionString =  question.getString("tqQuestion");                String option1String =  question.getString("tqOption1");                String option2String =  question.getString("tqOption2");                String option3String =  question.getString("tqOption3");                String option4String =  question.getString("tqOption4");                String answerString =  question.getString("tqCorrectAnswer");                quiz.add(new Quiz(                        questionString,                        option1String,                        option2String,                        option3String,                        option4String,                        answerString,                        questionNumber                ));            }        } catch (JSONException e) {            e.printStackTrace();        }    }    private String loadJsonFromAsset(String file){        String json="";        try {            InputStream is =getAssets().open(file);            int size = is.available();            byte[]buffer = new  byte[size];            is.read(buffer);            is.close();            json = new String(buffer, "UTF-8");        } catch (IOException e) {            e.printStackTrace();        }        return json;    }}